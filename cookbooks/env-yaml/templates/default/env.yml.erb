---
<% unless @defaults.empty? %>
defaults: &defaults
  <% @defaults.each do |key,val| %>
  <%= key.to_s %>: <%= val.to_s.inspect %>
  <% end %>
<% end %>

<% @namespaces.each do |namespace,overrides| %>
<%= namespace.to_s %>:
  <% unless @defaults.empty? %>
  <<: *defaults
  <% end %>
  <% overrides.each do |key,val| %>
  <%= key.to_s %>: <%= val.to_s.inspect %>
  <% end %>

<% end %>
